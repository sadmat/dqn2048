import { Button, VerticalBox, GridBox } from "std-widgets.slint";
import { TrainingWidget } from "training/training-widget.slint";
import { Plots, TrainingStats, Actions, UiTrainingState } from "globals.slint";
import { Size } from "size.slint";

export { Size }
export { Plots, TrainingStats, Actions, UiTrainingState }

export component AppWindow inherits Window {

    MenuBar {
        Menu {
            title: "file";
            MenuItem {
                title: "save model";
                activated => {
                    Actions.save-model();
                }
            }

            MenuItem {
                title: "load model";
                activated => {
                    Actions.load-model();
                }
            }

            MenuSeparator { }

            MenuItem {
                title: "quit";
                activated => {
                    Actions.quit();
                }
            }
        }
    }

    VerticalLayout {
        training-widget := TrainingWidget {
            state: TrainingStats.state;
            epoch: TrainingStats.epoch;
            epochs-per-second: TrainingStats.epochs-per-second;
            best-score: TrainingStats.best-score;
            best-tile: TrainingStats.best-tile;
            plot: Plots.score-plot;
            changed plot-size => {
                if (Plots.plot-size != self.plot-size) {
                    Plots.plot-size = self.plot-size;
                    Actions.plot-size-changed();
                }
            }
        }
    }
}
